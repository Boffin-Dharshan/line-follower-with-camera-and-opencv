<?xml version="1.0"?>
<plugin_config>
  <plugins>
    
    <!-- 3D Scene -->
    <plugin filename="GzScene3D">
      <ignition-gui>
        <title>3D View</title>
        <property type="bool" key="showTitleBar">false</property>
        <property type="string" key="state">docked</property>
      </ignition-gui>
      <engine>ogre2</engine>
      <scene>scene</scene>
      <ambient_light>0.4 0.4 0.4</ambient_light>
      <background_color>0.8 0.8 0.8</background_color>
      <camera_pose>6 0 6 0 0.5 3.14</camera_pose>
    </plugin>

    <!-- World Control -->
    <plugin filename="WorldControl">
      <ignition-gui>
        <title>World control</title>
        <property type="bool" key="showTitleBar">false</property>
        <property type="bool" key="resizable">false</property>
        <property type="double" key="height">72</property>
        <property type="double" key="width">121</property>
        <property type="double" key="z">1</property>
        <property type="string" key="state">floating</property>
        <anchors target="3D View">
          <line own="left" target="left"/>
          <line own="bottom" target="bottom"/>
        </anchors>
      </ignition-gui>
      <play_pause>true</play_pause>
      <step>true</step>
      <start_paused>true</start_paused>
      <service>/world/default/control</service>
      <stats_topic>/world/default/stats</stats_topic>
    </plugin>

    <!-- World Statistics -->
    <plugin filename="WorldStats">
      <ignition-gui>
        <title>World stats</title>
        <property type="bool" key="showTitleBar">false</property>
        <property type="bool" key="resizable">false</property>
        <property type="double" key="height">110</property>
        <property type="double" key="width">290</property>
        <property type="double" key="z">1</property>
        <property type="string" key="state">floating</property>
        <anchors target="3D View">
          <line own="right" target="right"/>
          <line own="bottom" target="bottom"/>
        </anchors>
      </ignition-gui>
      <sim_time>true</sim_time>
      <real_time>true</real_time>
      <real_time_factor>true</real_time_factor>
      <iterations>true</iterations>
      <topic>/world/default/stats</topic>
    </plugin>

    <!-- FIXED Teleop Plugin for Robot Control -->
    <plugin filename="Teleop">
      <ignition-gui>
        <title>Robot Teleop</title>
        <property type="string" key="state">docked</property>
        <property type="double" key="width">250</property>
        <property type="double" key="height">200</property>
        <property type="bool" key="showTitleBar">true</property>
      </ignition-gui>
      <!-- CRITICAL: Topic name must match exactly what the robot plugin expects -->
      <topic>cmd_vel</topic>
      <max_linear_velocity>2.0</max_linear_velocity>
      <max_angular_velocity>2.0</max_angular_velocity>
    </plugin>

    <!-- Entity Tree -->
    <plugin filename="EntityTree">
      <ignition-gui>
        <property type="string" key="state">docked_collapsed</property>
      </ignition-gui>
    </plugin>

    <!-- Transform Control -->
    <plugin filename="TransformControl">
      <ignition-gui>
        <property type="string" key="state">docked_collapsed</property>
      </ignition-gui>
    </plugin>

    <!-- Topic Viewer -->
    <plugin filename="TopicViewer">
      <ignition-gui>
        <property type="string" key="state">docked_collapsed</property>
      </ignition-gui>
    </plugin>

    <!-- Component Inspector -->
    <plugin filename="ComponentInspector">
      <ignition-gui>
        <property type="string" key="state">docked_collapsed</property>
      </ignition-gui>
    </plugin>

    <!-- Publisher Plugin - Alternative way to send commands -->
    <plugin filename="Publisher">
      <ignition-gui>
        <property type="string" key="state">docked_collapsed</property>
        <property type="bool" key="showTitleBar">true</property>
        <property type="string" key="title">Command Publisher</property>
      </ignition-gui>
    </plugin>

  </plugins>
</plugin_config>